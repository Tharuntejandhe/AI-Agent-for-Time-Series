{"ast":null,"code":"import React,{useState}from'react';import{useNavigate}from'react-router-dom';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";function generateAdminKey(){return Math.random().toString(36).substr(2,10).toUpperCase();}const Register=()=>{const[email,setEmail]=useState('');const[password,setPassword]=useState('');const[adminKey,setAdminKey]=useState('');const[error,setError]=useState('');const[success,setSuccess]=useState('');const navigate=useNavigate();const handleSubmit=async e=>{e.preventDefault();if(!email||!password){setError('Please enter both email and password.');setSuccess('');setAdminKey('');return;}const key=generateAdminKey();setAdminKey(key);setError('');setSuccess('Registration successful! Your admin key is shown below.');// Send registration to backend\ntry{const res=await fetch('http://localhost:8000/api/admin/register',{method:'POST',headers:{'Content-Type':'application/json'},body:JSON.stringify({email,password,key})});if(!res.ok){const data=await res.json();setError(data.detail||'Registration failed.');setSuccess('');return;}// Redirect to login after showing admin key for 3 seconds\nsetTimeout(()=>{navigate('/login');},3000);}catch(err){setError('Could not connect to backend.');setSuccess('');}};return/*#__PURE__*/_jsx(\"div\",{className:\"flex items-center justify-center min-h-screen bg-gray-100\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"bg-white p-8 rounded shadow-md w-full max-w-md\",children:[/*#__PURE__*/_jsx(\"h2\",{className:\"text-2xl font-bold mb-6 text-center\",children:\"Admin Register\"}),error&&/*#__PURE__*/_jsx(\"div\",{className:\"mb-4 text-red-500\",children:error}),success&&/*#__PURE__*/_jsx(\"div\",{className:\"mb-4 text-green-500\",children:success}),/*#__PURE__*/_jsxs(\"form\",{onSubmit:handleSubmit,children:[/*#__PURE__*/_jsxs(\"div\",{className:\"mb-4\",children:[/*#__PURE__*/_jsx(\"label\",{className:\"block mb-2 text-sm font-medium text-gray-700\",children:\"Email\"}),/*#__PURE__*/_jsx(\"input\",{type:\"email\",className:\"w-full px-3 py-2 border rounded focus:outline-none focus:ring-2 focus:ring-blue-400\",value:email,onChange:e=>setEmail(e.target.value),required:true})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"mb-6\",children:[/*#__PURE__*/_jsx(\"label\",{className:\"block mb-2 text-sm font-medium text-gray-700\",children:\"Password\"}),/*#__PURE__*/_jsx(\"input\",{type:\"password\",className:\"w-full px-3 py-2 border rounded focus:outline-none focus:ring-2 focus:ring-blue-400\",value:password,onChange:e=>setPassword(e.target.value),required:true})]}),/*#__PURE__*/_jsx(\"button\",{type:\"submit\",className:\"w-full bg-green-500 text-white py-2 rounded hover:bg-green-600 transition-colors\",children:\"Register\"})]}),adminKey&&/*#__PURE__*/_jsxs(\"div\",{className:\"mt-4 p-4 bg-yellow-100 text-yellow-800 rounded\",children:[/*#__PURE__*/_jsx(\"strong\",{children:\"Save this admin key:\"}),\" \",adminKey]})]})});};export default Register;","map":{"version":3,"names":["React","useState","useNavigate","jsx","_jsx","jsxs","_jsxs","generateAdminKey","Math","random","toString","substr","toUpperCase","Register","email","setEmail","password","setPassword","adminKey","setAdminKey","error","setError","success","setSuccess","navigate","handleSubmit","e","preventDefault","key","res","fetch","method","headers","body","JSON","stringify","ok","data","json","detail","setTimeout","err","className","children","onSubmit","type","value","onChange","target","required"],"sources":["C:/Users/ksath/OneDrive/Desktop/react/AI-Agent-for-Time-Series/frontend/src/components/Register.js"],"sourcesContent":["import React, { useState } from 'react';\r\nimport { useNavigate } from 'react-router-dom';\r\n\r\nfunction generateAdminKey() {\r\n  return Math.random().toString(36).substr(2, 10).toUpperCase();\r\n}\r\n\r\nconst Register = () => {\r\n  const [email, setEmail] = useState('');\r\n  const [password, setPassword] = useState('');\r\n  const [adminKey, setAdminKey] = useState('');\r\n  const [error, setError] = useState('');\r\n  const [success, setSuccess] = useState('');\r\n  const navigate = useNavigate();\r\n\r\n  const handleSubmit = async (e) => {\r\n    e.preventDefault();\r\n    if (!email || !password) {\r\n      setError('Please enter both email and password.');\r\n      setSuccess('');\r\n      setAdminKey('');\r\n      return;\r\n    }\r\n    const key = generateAdminKey();\r\n    setAdminKey(key);\r\n    setError('');\r\n    setSuccess('Registration successful! Your admin key is shown below.');\r\n    // Send registration to backend\r\n    try {\r\n      const res = await fetch('http://localhost:8000/api/admin/register', {\r\n        method: 'POST',\r\n        headers: { 'Content-Type': 'application/json' },\r\n        body: JSON.stringify({ email, password, key })\r\n      });\r\n      if (!res.ok) {\r\n        const data = await res.json();\r\n        setError(data.detail || 'Registration failed.');\r\n        setSuccess('');\r\n        return;\r\n      }\r\n      // Redirect to login after showing admin key for 3 seconds\r\n      setTimeout(() => {\r\n        navigate('/login');\r\n      }, 3000);\r\n    } catch (err) {\r\n      setError('Could not connect to backend.');\r\n      setSuccess('');\r\n    }\r\n  };\r\n\r\n  return (\r\n    <div className=\"flex items-center justify-center min-h-screen bg-gray-100\">\r\n      <div className=\"bg-white p-8 rounded shadow-md w-full max-w-md\">\r\n        <h2 className=\"text-2xl font-bold mb-6 text-center\">Admin Register</h2>\r\n        {error && <div className=\"mb-4 text-red-500\">{error}</div>}\r\n        {success && <div className=\"mb-4 text-green-500\">{success}</div>}\r\n        <form onSubmit={handleSubmit}>\r\n          <div className=\"mb-4\">\r\n            <label className=\"block mb-2 text-sm font-medium text-gray-700\">Email</label>\r\n            <input\r\n              type=\"email\"\r\n              className=\"w-full px-3 py-2 border rounded focus:outline-none focus:ring-2 focus:ring-blue-400\"\r\n              value={email}\r\n              onChange={(e) => setEmail(e.target.value)}\r\n              required\r\n            />\r\n          </div>\r\n          <div className=\"mb-6\">\r\n            <label className=\"block mb-2 text-sm font-medium text-gray-700\">Password</label>\r\n            <input\r\n              type=\"password\"\r\n              className=\"w-full px-3 py-2 border rounded focus:outline-none focus:ring-2 focus:ring-blue-400\"\r\n              value={password}\r\n              onChange={(e) => setPassword(e.target.value)}\r\n              required\r\n            />\r\n          </div>\r\n          <button\r\n            type=\"submit\"\r\n            className=\"w-full bg-green-500 text-white py-2 rounded hover:bg-green-600 transition-colors\"\r\n          >\r\n            Register\r\n          </button>\r\n        </form>\r\n        {adminKey && (\r\n          <div className=\"mt-4 p-4 bg-yellow-100 text-yellow-800 rounded\">\r\n            <strong>Save this admin key:</strong> {adminKey}\r\n          </div>\r\n        )}\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default Register;\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}